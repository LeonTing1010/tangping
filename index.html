<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>梦魇宿舍 - 躺平塔防</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="game-container">
        <!-- 开始界面 -->
        <div id="start-screen">
            <h1>梦魇宿舍</h1>
            <p class="subtitle">躺平塔防 · H5单机版</p>

            <div class="start-info">
                <div class="currency-display">
                    <span>蜜蜂币: <span id="bee-coins">0</span></span>
                </div>
            </div>

            <div class="rules">
                <h3>游戏规则</h3>
                <ul>
                    <li>倒计时内找到空房间并上床</li>
                    <li>睡觉产生金币，升级床提升产出</li>
                    <li>升级门增加防御，抵挡猛鬼</li>
                    <li>建造炮塔自动攻击猛鬼</li>
                    <li>击败猛鬼获胜，门破则失败</li>
                </ul>
            </div>

            <div class="talent-section">
                <h3>天赋升级</h3>
                <div class="talents">
                    <button class="talent-btn" data-talent="startGold">
                        <span class="talent-icon">💰</span>
                        <span class="talent-name">开局金币</span>
                        <span class="talent-level">Lv.<span id="talent-gold-level">0</span></span>
                        <span class="talent-cost"><span id="talent-gold-cost">10</span></span>
                    </button>
                    <button class="talent-btn" data-talent="doorHP">
                        <span class="talent-icon">🚪</span>
                        <span class="talent-name">门初始血量</span>
                        <span class="talent-level">Lv.<span id="talent-door-level">0</span></span>
                        <span class="talent-cost"><span id="talent-door-cost">15</span></span>
                    </button>
                </div>
            </div>

            <button id="start-btn">开始游戏</button>
        </div>

        <!-- 游戏界面 -->
        <div id="game-screen" class="hidden">
            <div id="top-hud">
                <div class="hud-left">
                    <div class="gold-display">
                        <span class="coin-icon">🪙</span>
                        <span id="gold-amount">0</span>
                    </div>
                    <div class="dps-display">
                        <span>⚔️</span>
                        <span id="dps-amount">0</span>/秒
                    </div>
                </div>
                <div class="hud-center">
                    <span id="wave-info">准备阶段</span>
                </div>
                <div id="player-icons"></div>
            </div>

            <canvas id="game-canvas"></canvas>

            <!-- 广播消息 -->
            <div id="broadcast-container"></div>

            <!-- 建造菜单 -->
            <div id="build-menu" class="hidden">
                <div class="build-header">
                    <span>🔨 建造</span>
                    <button id="close-build">✕</button>
                </div>
                <div class="build-items">
                    <button class="build-item" data-type="turret">
                        <span class="item-icon">🔫</span>
                        <span class="item-info">
                            <span class="item-name">弹弓炮台</span>
                            <span class="item-desc">自动攻击猛鬼</span>
                        </span>
                        <span class="item-cost">🪙 50</span>
                    </button>
                    <button class="build-item" data-type="generator">
                        <span class="item-icon">⚡</span>
                        <span class="item-info">
                            <span class="item-name">发电机</span>
                            <span class="item-desc">提升炮塔攻速</span>
                        </span>
                        <span class="item-cost">🪙 80</span>
                    </button>
                    <button class="build-item" data-type="trap">
                        <span class="item-icon">🪤</span>
                        <span class="item-info">
                            <span class="item-name">陷阱</span>
                            <span class="item-desc">减速并伤害猛鬼</span>
                        </span>
                        <span class="item-cost">🪙 40</span>
                    </button>
                    <button class="build-item" data-type="plant">
                        <span class="item-icon">🌱</span>
                        <span class="item-info">
                            <span class="item-name">摇钱草</span>
                            <span class="item-desc">每秒+1金币</span>
                        </span>
                        <span class="item-cost">🪙 30</span>
                    </button>
                </div>
            </div>

            <!-- 升级面板 -->
            <div id="upgrade-panel" class="hidden">
                <div class="upgrade-header">
                    <span id="upgrade-title">升级</span>
                    <button id="close-upgrade">✕</button>
                </div>
                <div id="upgrade-content">
                    <div class="upgrade-icon" id="upgrade-icon">🛏️</div>
                    <div class="upgrade-info">
                        <div id="upgrade-name">破旧木床</div>
                        <div id="upgrade-desc">产出: 2金币/秒</div>
                        <div id="upgrade-next">下一级: 席梦思 (4金币/秒)</div>
                    </div>
                </div>
                <button id="upgrade-btn">
                    <span>升级</span>
                    <span class="upgrade-cost">🪙 <span id="upgrade-cost">50</span></span>
                </button>
            </div>

            <!-- 快捷按钮 -->
            <div id="quick-buttons">
                <button class="quick-btn" id="btn-bed" title="升级床">🛏️</button>
                <button class="quick-btn" id="btn-door" title="升级门">🚪</button>
                <button class="quick-btn" id="btn-build" title="建造">🔨</button>
            </div>
        </div>

        <!-- 结算界面 -->
        <div id="result-screen" class="hidden">
            <h1 id="result-title">游戏结束</h1>
            <p id="result-message"></p>
            <div id="result-stats">
                <p>存活时间: <span id="final-time">0</span>秒</p>
                <p>击杀猛鬼: <span id="final-kills">0</span>只</p>
                <p>获得金币: <span id="final-gold">0</span></p>
                <p class="bee-reward">获得蜜蜂币: <span id="final-bee">0</span></p>
            </div>
            <div id="result-buttons">
                <button id="revive-btn" class="ad-btn">
                    <span>📺 看广告复活</span>
                </button>
                <button id="double-btn" class="ad-btn">
                    <span>📺 双倍奖励</span>
                </button>
                <button id="restart-btn">再来一局</button>
            </div>
        </div>
    </div>

    <script src="game.js"></script>
</body>
</html>
